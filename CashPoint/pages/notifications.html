<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notifications — CashPoint</title>
  <link rel="stylesheet" href="../styles/user.css">
</head>
<body>
  <div id="navbarMount"></div>

  <main class="container">
    <div class="card">
      <div class="h2">Notifications</div>
      <div id="notiList" class="mt-12"></div>
    </div>
  </main>

  <div id="footerMount"></div>

  <script src="../scripts/auth.js"></script>
  <script>
    async function loadComponent(mountId, path) {
      try { const r = await fetch(path); if(!r.ok) return; document.getElementById(mountId).innerHTML = await r.text(); } catch(e){}
    }
    loadComponent('navbarMount','../components/navbar.html');
    loadComponent('footerMount','../components/footer.html');

    async function loadNotifications(){
      // Try local JSON first
      try {
        const res = await fetch('../database/notifications.json');
        if(res.ok){
          const data = await res.json();
          const list = document.getElementById('notiList');
          list.innerHTML = '';
          (data.notifications || []).forEach(n => {
            const d = document.createElement('div');
            d.className = 'card';
            d.innerHTML = `<div style="font-weight:700">${n.title||'Notification'}</div><div class="text-muted">${n.message}</div><div class="text-muted" style="margin-top:6px">${n.date||''}</div>`;
            list.appendChild(d);
          });
          return;
        }
      } catch(e){}
      // Fallback message
      document.getElementById('notiList').innerHTML = '<div class="empty">কোনো নোটিফিকেশন নেই</div>';
    }

    window.addEventListener('load', loadNotifications);
  </script>
</body>
</html>
